var qiq=function(){function e(e){return e.name||(e.toString().match(/function (.+?)\(/)||[,""])[1]}function n(e,n,r,t){var i=e[n];if(4==r)return!i||void 0!==i.length&&!i.length?"":t(e);if(r>1&&this.last)return this.last=null,"";if(Array.isArray(i))return r%3==0?i.length?"":t(e):1==r?i.map(t).join(""):t(i);if(1==r&&i&&i.constructor===Object)return t(i);if("function"==typeof i){var i=i.call(e,t(e));if("boolean"!=typeof i)return i;i||2!==r||(i=!i)}return r%3===0&&(i=!i),this.last=i,i?t(e):""}function r(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function t(e,n,r){n=n||{},r=r||{};var t=r.key&&l[r.key]||i(e,r);return r.key&&!l[r.key]&&(l[r.key]=t),t(n)}function i(t,i){i=i||{};for(var l,a,p=[],f={},h=[],g=t.split(i.delimiter||s),b=i.escapeNewLines?"\\\\\\n":"\\n",d=e(r),j=e(n),m=0;m<g.length;++m)if(l=g[m],m%2==0)p.push('"'+l.replace(/"/g,'\\"')+'"');else switch(l[0]){case"/":l=l.slice(1),""!=l&&h[h.length-1]!=l||(p.push("})+"),h.pop(),delete f[l]);break;case"^":l=l.slice(1),a=0,h.push(l),o(l),u(f[l]),f[l]=a,p.push("+"+j+'(obj,"'+l+'",'+a+",function(obj){return ");break;case"#":l=l.slice(1),a=1,h.push(l),o(l),u(l,f[l]),f[l]=a,p.push("+"+j+'(obj,"'+l+'",'+a+",function(obj){return ");break;case"!":l=l.slice(1),o(l),p.push("+obj."+l+"+");break;case"_":l=l.slice(1),""!=l&&"else"!=l||(l=h[h.length-1]),a=f[l]+2,p.push("})+"+j+'(obj,"'+l.replace(/\?$/,"")+'",'+a+",function(obj){return ");break;default:"?"==l.slice(-1)?(a=4,h.push(l),u(l,f[l]),f[l]=a,p.push("+"+j+'(obj,"'+l.slice(0,-1)+'",'+a+",function(obj){return ")):(o(l),l="this"==l?"":"."+l,p.push("+"+d+"(obj"+l+")+"))}return p="\n"+c("var last;")+"\n"+c(r.toString())+";\n\n"+c(n.toString())+";\n\n return "+p.join("").replace(/\r?\n/g,b),new Function("obj",p)}function o(e){if(!e.match(/^[\w.\[\]\"\\']+$/))throw new Error('invalid property "'+e+'"')}function u(e,n){if(void 0!==n)throw new Error('cannot overwrite existing conditional for "'+e+'"')}function c(e){return e.replace(/^/gm,"  ")}var l={},s=/\{\{ ?| ?\}\}/;return{render:t,compile:i}}();"undefined"!=typeof module&&module.exports&&(exports=module.exports=qiq.render,exports.compile=qiq.compile);
